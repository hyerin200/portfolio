<script>
    import { onMount } from 'svelte';
    import { navigate } from 'svelte-routing';

    export let id;

    let detailData = null;
    let loading = true;
    let error = null;
    let imageLoadError = false;

    function goToPortfolio() {
        navigate(`/portfolio/${id}`);
    }

    function handleImageLoadError() {
        imageLoadError = true;
        console.error("Failed to load poster image. Check Google Drive permissions (must be 'Anyone with the link' - Viewer)");
    }

    async function fetchDetail(itemId) {
        if (!itemId) {
            error = "IDÍ∞Ä Ïú†Ìö®ÌïòÏßÄ ÏïäÏäµÎãàÎã§.";
            loading = false;
            return;
        }

        await new Promise(resolve => setTimeout(resolve, 500));

        let mockDetail;

        const common_roles = [
            { period: "2023.01~2023.08", event: "Í∏∞Ìöç Î∞è ÏΩòÌÖêÏ∏† Ï†úÏûë" },
            { period: "2023.09~2024.03", event: "ÌôçÎ≥¥ Î∞è ÎßàÏºÄÌåÖ ÏßÄÏõê" },
            { period: "2024.04~ÌòÑÏû¨", event: "Ïö¥ÏòÅÏßÑ ÌôúÎèô Ï∞∏Ïó¨" },
        ];

        if (itemId === 1) {
            mockDetail = {
                id: 1,
                title: "Ïñ∏Ïñ¥ÍµêÎ•òÌôúÎèô",
                date: "2022.03-2024.06",
                overview: "ÍµêÎÇ¥ÏóêÏÑú Ïã§ÌñâÌïòÎäî Ïñ∏Ïñ¥ ÍµêÎ•ò ÌîÑÎ°úÍ∑∏Îû®Í≥º Ïô∏Î∂Ä ÎèôÏïÑÎ¶¨ ÏûÖÎãàÎã§.",
                poster_path: 'https://drive.google.com/thumbnail?id=1iQB605KBuLVPYfbqGao-im4NNolmFAWg&sz=w1000',
                roles: [
                    { period: "2022.03-2024.06", event: "ÌäúÌÑ∞ÎßÅ+Í∏ÄÎ°úÎ≤å ÎπåÎ¶¨ÏßÄ ÌîÑÎ°úÍ∑∏Îû®" },
                    { period: "2021.03.01.~ ", event: "ÌöåÌôî ÎèôÏïÑÎ¶¨(fuwafuwa) Ï∞ΩÏÑ§" },
                ],
                relatedActivities: [
                    {
                        img: 'https://drive.google.com/thumbnail?id=127Qbo_ffkR05KayIT9c8kPRu2uvaHTWA&sz=w1000',
                        title: 'ÌäúÌÑ∞ÎßÅ&Í∏ÄÎ°úÎ≤å ÎπåÎ¶¨ÏßÄ ',
                        desc: 'ÍµêÌôòÌïôÏÉùÏúºÎ°ú Îã®Íµ≠ÎåÄÌïôÍµêÏóêÏÑú ÏàòÏóÖÏùÑ Îì£Í≥† ÏûàÎäî ÌïôÏÉùÎì§Ïù¥ ÌïúÍµ≠ ÌïôÏÉùÎì§ÏùÑ ÎåÄÏÉÅÏúºÎ°ú Ìï¥Îãπ Ïñ∏Ïñ¥Î°ú ÏàòÏóÖÏùÑ ÏßÑÌñâÌïòÎäî ÌîÑÎ°úÍ∑∏Îû®ÏûÖÎãàÎã§. Ïã†Ï≤≠ÌïòÍ∏∞ Ï†ÑÏóê ÌïôÏÉùÎì§Ïù¥ Ïò¨Î†§Îëî Í∞ïÏùòÍ≥ÑÌöçÏÑúÎ•º ÌôïÏù∏Ìïú ÌõÑ ÏàòÏóÖÏùÑ ÏÑ†ÌÉùÌï† Ïàò ÏûàÏäµÎãàÎã§. Ïù¥ ÌîÑÎ°úÍ∑∏Îû®ÏùÄ Ïñ∏Ïñ¥Î•º Î∞∞Ïö∏ Í∏∞ÌöåÎ•º Ï†úÍ≥µÌïòÍ≥†, Î¨∏ÌôîÎ•º ÍµêÎ•òÌï† Ïàò ÏûàÎã§Îäî Ïû•Ï†êÏù¥ ÏûàÏúºÎ©∞, ÎèôÏãúÏóê Ïñ∏Ïñ¥ ÌïôÏäµ Îä•Î†•ÏùÑ Ìñ•ÏÉÅÏãúÌÇ¨ Ïàò ÏûàÏäµÎãàÎã§.',
                        link: '#',
                    },
                    {
                        img: 'https://drive.google.com/thumbnail?id=1a8GIgyc0xnmMSUP3-coXmwqlVm0q-cFk&sz=w1000',
                        title: 'ÌöåÌôî ÎèôÏïÑÎ¶¨ Ï∞ΩÏÑ§',
                        desc: 'Ïô∏Íµ≠Ïñ¥ ÌïôÏäµ Îä•Î†•ÏùÑ Ìñ•ÏÉÅÏãúÌÇ§Í≥†, ÏûêÍ≤©Ï¶ù Ï§ÄÎπÑ, Î¨∏Ìôî ÏÉùÌôú Í≥µÏú†, ÌÜ†Î°† ÌïôÏäµ Îì±ÏùÑ ÏßÑÌñâÌïòÎ©¥ÏÑú Ïñ∏Ïñ¥Î•º Î∞∞Ïö∞Í≥†, ÏÑúÎ°úÏùò Ïñ∏Ïñ¥Î•º ÏÇ¨Ïö©ÌïòÎ©∞ ÎåÄÌôîÌï† Ïàò ÏûàÎäî ÏûêÏã†Í∞êÏùÑ Í∏∏Îü¨Ï§çÎãàÎã§.',
                        link: '#',
                    },

                ]
            };
        } else if (itemId === 2) {
            mockDetail = {
                id: 2,
                title: "Î∂ÅÌïúÏÇ∞ ÏÇºÎ∂ÄÎ•¥ÎÑ§ÏÉÅÏä§ ÏïÑÌååÌä∏(ÏÑúÎåÄÎ¨∏Íµ¨ ÌôçÏùÄÎèô) ",
                date: "2022",
                overview: "ÏÑúÎåÄÎ¨∏Íµ¨ ÌôçÏùÄÎèô Î∂ÅÌïúÏÇ∞ ÏÇºÎ∂ÄÎ•¥ÎÑ§ÏÉÅÏä§ ÏïÑÌååÌä∏Î•º Î∂ÑÏÑùÌïòÏòÄÏäµÎãàÎã§. Ìï¥Îãπ ÏßÄÏó≠ÏùÄ ÏÑúÏö∏ ÎÇ¥ Ï†ÄÌèâÍ∞Ä ÏßÄÏó≠ÏúºÎ°ú ÏãúÏÑ∏Í∞Ä ÌÉÄ ÏßÄÏó≠Ïùò Ï†àÎ∞ò ÏàòÏ§ÄÏù¥Î©∞, 2015~2022ÎÖÑ ÎèôÏïà ÏÑúÎåÄÎ¨∏Íµ¨ Ïù∏Íµ¨Îäî ÏïΩ 3.2% Í∞êÏÜåÌïòÎäî Î≥ÄÎèô Ï∂îÏÑ∏Î•º Î≥¥ÏòÄÏäµÎãàÎã§. ÌôçÏùÄÎèô ÏùºÎåÄÎäî ÎåÄÍ∑úÎ™® Ïã†Ï∂ï Ï£ºÍ±∞Îã®ÏßÄÎ°ú ÌÉàÎ∞îÍøàÌïòÎ©∞ ÎèÑÏã¨ Ï∂úÌá¥Í∑º Ïã§ÏàòÏöîÏûêÍ∞Ä Ï¶ùÍ∞ÄÌïòÏòÄÍ≥†, 2004ÎÖÑ Ï£ºÍ±∞ÌôòÍ≤ΩÍ∞úÏÑ†ÏÇ¨ÏóÖ Ïù¥ÌõÑ PF Î∞è Ïã†ÌÉÅÍ≥ÑÏïΩ Ï≤¥Í≤∞, ÌÜ†ÏßÄ Ïù¥Ï£º¬∑Ï≤†Í±∞ ÏôÑÎ£å, Í±¥Ï∂ïÌóàÍ∞Ä ÏßÄÏó∞ Îì±Ïùò Í≥ºÏ†ïÏùÑ Í±∞Ï≥ê 2018ÎÖÑ ÌÜ†ÏßÄÏ£º Ï†ÑÏõê ÎèôÏùòÎ•º ÌÜµÌï¥ Í±¥Ï∂ïÌóàÍ∞ÄÎ•º ÎìùÌïòÍ≥† ÏÇºÎ∂ÄÌÜ†Í±¥Ïù¥ ÏãúÍ≥µÏÇ¨Î°ú ÏÑ†Ï†ïÎêòÏñ¥ 2020ÎÖÑ 12Ïõî Í≥µÏÇ¨Î•º ÏôÑÎ£åÌïòÏòÄÏúºÎ©∞, 2021ÎÖÑ 9Ïõî ÏµúÏ¢Ö ÏÇ¨Ïö©ÏäπÏù∏ÏùÑ Î∞õÏïòÏäµÎãàÎã§. ÌäπÌûà, ÌòÑÏû•ÏùÑ ÏßÅÏ†ë Î∞©Î¨∏ÌïòÍ≥† Î≥¥Í≥†ÏÑúÎ•º Î©¥Î∞ÄÌûà Í≤ÄÌÜ†ÌïòÎ©∞ Îç∞Ïù¥ÌÑ∞Î•º Î∂ÑÏÑùÌï®ÏúºÎ°úÏç® Ïã§Ï†ú Î∂ÄÎèôÏÇ∞ ÌôòÍ≤ΩÍ≥º ÌÜµÍ≥ÑÎ•º Ï¢ÖÌï©Ï†ÅÏúºÎ°ú Ïù¥Ìï¥Ìï† Ïàò ÏûàÎèÑÎ°ù Î∂ÑÏÑùÌñàÏäµÎãàÎã§.",
                poster_path: 'https://drive.google.com/thumbnail?id=1T3WBk_Ppw5db8IAtPFu2umWMexLv5pSl&sz=w2000',
        
            };
        } else if (itemId === 3) {
            mockDetail = {
                id: 3,
                title: "ÏùòÎåÄÏ†ïÏõê Ï¶ùÍ∞ÄÏôÄ ÏßëÍ∞í Î≥ÄÎèô",
                date: "2024 ",
                overview: "Ï°∞ÏÇ¨ Í≤∞Í≥º, ÏßÄÏó≠ ÏùòÎ£å ÏãúÏä§ÌÖúÏùò ÏïàÏ†ïÏÑ±Í≥º Í≥µÍ≥µÏùòÎ£å ÏÑúÎπÑÏä§Ïùò Ïßà Ìñ•ÏÉÅÏùÄ Îã®ÏàúÌïú ÏùòÎ£å Ïù∏Î†• ÌôïÏ∂©Ïóê Í∑∏ÏπòÏßÄ ÏïäÍ≥†, Ï≤¥Í≥ÑÏ†ÅÏù∏ ÏßÄÏó≠ Í¥ÄÎ¶¨ÏôÄ Ï†úÎèÑÏ†Å Î≥¥ÏôÑÏù¥ ÌïÑÏàòÏ†ÅÏûÑÏùÑ ÌôïÏù∏Ìï† Ïàò ÏûàÏóàÏäµÎãàÎã§. Ïù¥Îäî Î∂ÄÎèôÏÇ∞ ÏãúÏû•ÏóêÏÑú Îã®ÏàúÌïú Ï£ºÌÉù Í≥µÍ∏â ÌôïÎåÄÎßåÏúºÎ°úÎäî ÏßÄÏó≠ Í∞ÄÏπòÍ∞Ä ÏÉÅÏäπÌïòÏßÄ ÏïäÍ≥†, Í∏∞Î∞ò ÏãúÏÑ§Í≥º Ï†úÎèÑÏ†Å ÌôòÍ≤Ω Í∞úÏÑ†Ïù¥ Ìï®Íªò Ïù¥Î£®Ïñ¥Ï†∏Ïïº ÌïòÎäî Ï†êÍ≥º Ïú†ÏÇ¨Ìï©ÎãàÎã§. Îî∞ÎùºÏÑú ÏùòÎ£å Ïù∏Î†•Ïùò Í∑†Ìòï ÏûàÎäî Î∞∞ÏπòÏôÄ ÏßÄÏó≠ ÎßûÏ∂§Ìòï Ï†ïÏ±ÖÏù¥ Ïû•Í∏∞Ï†ÅÏúºÎ°ú ÏßÄÏó≠ÏÇ¨Ìöå Í±¥Í∞ïÍ≥º Í≤ΩÏ†ú ÌôúÏÑ±ÌôîÏóê Ï§ëÏöîÌïú Ïó≠Ìï†ÏùÑ Ìï† Í≤ÉÏúºÎ°ú Î∂ÑÏÑùÌñàÏäµÎãàÎã§.",
                poster_path: 'https://drive.google.com/thumbnail?id=1Zy_TkNwXhE938z7-k4XKin2uoFU-GyMZ&sz=w1000',

            };
        } else if (itemId === 4) {
            mockDetail = {
                id: 4,
                title: "ÎçîÏÉµÏò§Ìè¨ÏÑºÌä∏Îü¥Ìè¨Î†à",
                date: "2023",
                overview: "ÎåÄÏÉÅÏßÄÏùò ÏûÖÏßÄÏôÄ Ïª§ÎÆ§ÎãàÌã∞ ÏãúÏÑ§ÏùÑ Ï≤¥Í≥ÑÏ†ÅÏúºÎ°ú Ï°∞ÏÇ¨ÌïòÍ∏∞ ÏúÑÌï¥ ÏßÅÏ†ë ÌòÑÏû•ÏùÑ Î∞©Î¨∏ÌïòÏó¨ Í±∞Ï£ºÎØºÍ≥ºÏùò Ïù∏ÌÑ∞Î∑∞ Î∞è ÏÑ§Î¨∏Ï°∞ÏÇ¨Î•º Ïã§ÏãúÌïòÏòÄÏäµÎãàÎã§. Ïù¥Î•º ÌÜµÌï¥ ÏòàÏÉÅÎêòÎäî Î∂ÄÏ°±Ìïú Î∂ÄÎ∂ÑÏùÑ Ï†ïÌôïÌûà ÌååÏïÖÌïòÍ≥†, Ï£ºÍ±∞ ÌôòÍ≤ΩÍ≥º ÏûÖÏßÄ ÌäπÏÑ±ÏùÑ Ï¢ÖÌï©Ï†ÅÏúºÎ°ú Î∂ÑÏÑùÌï† Ïàò ÏûàÏóàÏäµÎãàÎã§. ÌòÑÏû• Ï°∞ÏÇ¨Î•º Î∞îÌÉïÏúºÎ°ú Ïã§ÏßàÏ†ÅÏù∏ Í∞úÏÑ† Î∞©ÏïàÏùÑ Î™®ÏÉâÌïòÎ©∞, Ï£ºÎØºÏùò ÏÇ∂Ïùò Ïßà Ìñ•ÏÉÅÍ≥º ÏßÄÏó≠ Ïª§ÎÆ§ÎãàÌã∞ ÌôúÏÑ±ÌôîÏóê Í∏∞Ïó¨Ìï† Ïàò ÏûàÎäî Ï†ÑÎûµÏùÑ Í≥†ÎØºÌïòÏòÄÏäµÎãàÎã§.",
                poster_path: 'https://drive.google.com/thumbnail?id=12VIlhWJoBP2e_S1b6Xk3PH0h2y37Xwgy&sz=w2000',
                     
            };
        } else if (itemId === 5) {
            mockDetail = {
                id: 5,
                title: "ÏûêÏ†ÑÍ±∞ÏôÄ ÎèÑÏãúÏà≤ Ïù∏ÌîÑÎùºÎ•º Ï§ëÏã¨ÏúºÎ°ú Ìï¥Ïô∏ÏÇ¨Î°Ä ÎπÑÍµê",
                date: "2024",
                overview: "ÌÉÑÏÜåÏ§ëÎ¶ΩÎèÑÏãú Ï°∞ÏÑ±ÏùÑ ÏúÑÌï¥ Ìï¥Ïô∏ ÏÇ¨Î°ÄÏôÄ Ïö∞Î¶¨ÎÇòÎùºÏùò ÎèÑÏãú Ïà≤ Î∞è ÏûêÏ†ÑÍ±∞ Ïù∏ÌîÑÎùº Íµ¨Ï∂ï ÌòÑÌô©ÏùÑ ÎπÑÍµê¬∑Î∂ÑÏÑùÌïòÏòÄÏäµÎãàÎã§. ÌäπÌûà ÌååÎ¶¨ÏôÄ ÏïîÏä§ÌÖåÎ•¥Îã¥Í≥º Í∞ôÏùÄ Ìï¥Ïô∏ ÎèÑÏãúÎäî ÏûêÎèôÏ∞® Ï§ëÏã¨ Íµ¨Ï°∞Î•º Ï†ÑÌôòÌïòÍ≥†, ÎèÑÎ°ú Îã§Ïù¥Ïñ¥Ìä∏ Î∞©ÏãùÏùÑ ÎèÑÏûÖÌï¥ ÏûêÎèôÏ∞® Ï£ºÌñâÏùÑ Ï†úÌïúÌïòÎ©∞ Î≥¥ÌñâÏûêÏôÄ ÏûêÏ†ÑÍ±∞ Ïù¥Ïö©ÏûêÏóêÍ≤å Ïö∞ÏÑ†Í∂åÏùÑ Î∂ÄÏó¨ÌïòÍ≥† ÏûàÏäµÎãàÎã§. Î∞òÎ©¥ Ïö∞Î¶¨ÎÇòÎùºÎäî ÎèÑÎ°ú Îã§Ïù¥Ïñ¥Ìä∏ Ï†ïÏ±ÖÏóê ÎåÄÌïú Î∂ÄÏ†ïÏ†Å Ïù∏ÏãùÍ≥º Ïù∏ÌîÑÎùº Î∂ÄÏ°±ÏúºÎ°ú Ïù∏Ìï¥ Ïù¥Îü¨Ìïú Î≥ÄÌôîÍ∞Ä ÎçîÎîò Ìé∏ÏûÖÎãàÎã§. Îî∞ÎùºÏÑú Ìï¥Ïô∏ ÏÇ¨Î°ÄÏ≤òÎüº ÏûêÎèôÏ∞® Ïù¥Ïö©ÏùÑ Î∂àÌé∏ÌïòÍ≤å ÎßåÎìúÎäî Ï†ÅÍ∑πÏ†ÅÏù∏ Ï†ïÏ±Ö ÎèÑÏûÖÍ≥º ÎçîÎ∂àÏñ¥, ÏûêÏ†ÑÍ±∞Ïà≤ Î∞è ÎèÑÏãúÏà≤ Ï°∞ÏÑ± Îì± ÏπúÌôòÍ≤Ω Ïù∏ÌîÑÎùº ÌôïÎåÄÎ•º ÌÜµÌï¥ ÏßÄÏÜç Í∞ÄÎä•Ìïú ÎèÑÏãú ÌôòÍ≤Ω Ï°∞ÏÑ±Ïóê Í∏∞Ïó¨Ìï† Ïàò ÏûàÏùÑ Í≤ÉÏúºÎ°ú Í∏∞ÎåÄÎê©ÎãàÎã§.",
                poster_path: 'https://drive.google.com/thumbnail?id=1OuDi4zSYiyH7dmq0M6mZxeEhLQFEADD9&sz=w2000',
                roles: [],
                relatedActivities: [],
            };
        } else if (itemId === 6) {
            mockDetail = {
                id: 6,
                title: "ÏùºÎ≥∏Í≥º ÌïúÍµ≠Ïùò Í≥µÏó∞Ïû• ÌòÑÌô©Í≥º ÏûÖÏßÄÎ∂ÑÏÑù ",
                date: "2025",
                overview: "ÏùºÎ≥∏Ïùò Í≥µÏó∞Ïû• Ïù∏ÌîÑÎùº ÌòÑÌô©ÏùÑ Ï°∞ÏÇ¨ÌïòÎ©∞, 2016ÎÖÑ Ïù¥ÌõÑ ÎåÄÌòï Í≥µÏó∞Ïû• Î∂ÄÏ°±Í≥º ÎÖ∏ÌõÑÌôî Î¨∏Ï†úÎ•º Ï§ëÏã¨ÏúºÎ°ú ÏïÑÎ¶¨ÏïÑÏºÄ Í≥µÏó∞Ïû• Îì± ÎåÄÍ∑úÎ™® ÏãúÏÑ§Ïùò Ïã†Ï∂ï Î∞è Î≥¥Ïàò ÏÇ¨Î°ÄÎ•º Î∂ÑÏÑùÌñàÏäµÎãàÎã§. ÎèôÏãúÏóê ÎèÑÏã¨ ÎÇ¥ 2,000~3,000ÏÑù Í∑úÎ™® Ï§ëÌòï ÌôÄÏùò Î∂ÄÏ°± Î¨∏Ï†úÎ•º ÌååÏïÖÌïòÍ≥†, Ï†ÄÏ∂úÏÇ∞ÏúºÎ°ú ÌèêÍµêÎêú Ï¥àÎì±ÌïôÍµêÎ•º ‚ÄòÏóêÎèÑÍ∞ÄÏôÄÍµ¨ Î¨∏Ìôî Ïä§Ìè¨Ï∏† ÌîåÎùºÏûê‚ÄôÏôÄ Í∞ôÏù¥ Î¨∏Ìôî¬∑Ïä§Ìè¨Ï∏† ÏãúÏÑ§Î°ú Ïû¨Í±¥Ï∂ïÌïú ÏÇ¨Î°ÄÎ•º ÏßëÏ§ëÏ†ÅÏúºÎ°ú Ïó∞Íµ¨ÌñàÏäµÎãàÎã§. Ïù¥Î•º ÌÜµÌï¥ Ïù∏ÌîÑÎùº ÌôïÏ∂©ÏùÑ ÏúÑÌïú Ïû¨Í±¥Ï∂ï Ï†ÑÎûµÍ≥º ÏûÖÏßÄ Î∂ÑÏÑùÏùò Ï§ëÏöîÏÑ±ÏùÑ Ï≤¥Í≥ÑÏ†ÅÏúºÎ°ú ÏïåÍ≤å ÎêòÏóàÍ≥†, ÎåÄÍ∑úÎ™® Í≥µÏó∞Ïû•ÎøêÎßå ÏïÑÎãàÎùº Ï§ëÌòï Í≥µÏó∞Ïû• ÌôïÎ≥¥ÏôÄ Í≥µÍ∞Ñ Ïû¨ÌôúÏö© Ï†ÑÎûµÏù¥ ÏßÄÏó≠ Î¨∏Ìôî ÌôúÏÑ±ÌôîÏôÄ ÏãúÏÑ§ Ïö¥ÏòÅ Ìö®Ïú®ÏÑ± Ìñ•ÏÉÅÏóê Í∏∞Ïó¨Ìï† Ïàò ÏûàÎã§Îäî Ï†êÏùÑ ÎèÑÏ∂úÌñàÏäµÎãàÎã§.",
                poster_path: 'https://drive.google.com/thumbnail?id=1UelioMtkBytT3WX0AFTlHupNfflkkJJ0&sz=w1000',
                roles: [],
                relatedActivities: [],
            };
        } else if (itemId === 7) {
            mockDetail = {
                id: 7,
                title: "Îã®Î©¥/ÌèâÎ©¥ÎèÑ Î∂ÑÏÑù Î∞è ÏûÖÏßÄÎ∂ÑÏÑù",
                date: "ÎåÄÌëúÏ†Å ÏßÄÏó≠ Î∂ÑÏÑù",
                overview: "ÍπÄÌè¨ Í≥†Ï¥åÏùç ÏùÄÌñâÏ†ïÏßÄÍµ¨/ ÎèôÏûëÍµ¨Î≥∏Îèô(ÎÖ∏Îì§Ïó≠, ÎÖ∏ÎüâÏßÑ)/ Î∂ÄÏÇ∞Í¥ëÏó≠Ïãú Î∂ÄÏÇ∞ÏßÑÍµ¨(Ïò§ÌîºÏä§ÌÖî)/ ÌèâÌÉù Î™®Í≥°Îèô(Ïò§ÌîºÏä§ÌÖî) ",
                poster_path: 'https://drive.google.com/thumbnail?id=1A5qFpeDT6mMmrIGMURb5L63bZpkbfrC6&sz=w2000',
                roles: [],
                relatedActivities: [],
            };
        }

        detailData = mockDetail;
        imageLoadError = false;
        loading = false;
    }

    onMount(() => {
        const itemId = parseInt(id, 10);
        fetchDetail(itemId);
    });
</script>

<div class="container">
    {#if loading}
        <div class="loading-area">
            <div class="spinner"></div>
            <p>Ï†ïÎ≥¥Î•º Î°úÎìúÌïòÎäî Ï§ë...</p>
        </div>
    {:else if error}
        <div class="error-area">
            <h1>Îç∞Ïù¥ÌÑ∞ Î°úÎìú Ïò§Î•ò</h1>
            <p>{error}</p>
        </div>
    {:else if detailData}

        <div class="left">
            <div class="title">{detailData.title || 'undefined'}</div>

            <div class="date-badge">{detailData.date || 'undefined'}</div>

            <button class="btn-play">
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="currentColor" class="mr-2"><path d="m11.293 17.293 1.414 1.414L19 12l-6.293-6.707-1.414 1.414L15.586 11H5v2h10.586z"/></svg>
                Ìè¨Ìä∏Ìè¥Î¶¨Ïò§ Í∞êÏÉÅ
            </button>

            <div class="icon-row">
                <div class="icon-heart">
                    <svg class="heart-svg" xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 14c1.49-1.46 3-3.23 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3.15.68-4.5 2-1.35-1.32-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.27 1.51 4.04 3 5.5l7 7Z"/></svg>
                    <span class="icon-text">Ï∞ú</span>
                </div>
                <div>
                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"/><circle cx="6" cy="12" r="3"/><circle cx="18" cy="19" r="3"/><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"/><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"/></svg>
                    <span class="icon-text">Í≥µÏú†</span>
                </div>
            </div>

            <div class="desc">{@html detailData.overview || 'undefined'}</div>

            {#if detailData.roles && detailData.roles.length > 0}
            <div class="role-box-wrap left-role-box">
                <p class="role-box-title">ÌôúÎèô Ïó∞ÌòÅ</p>
                <div class="role-box">
                    {#each detailData.roles as role}
                        <p>
                            <span class="timeline-period">{role.period}</span>
                            <span class="timeline-event">{role.event}</span>
                        </p>
                    {/each}
                </div>
            </div>
            {/if}

            {#if detailData.relatedActivities && detailData.relatedActivities.length > 0}
            <div class="role-box-wrap card-section">
                <p class="role-box-title">Í¥ÄÎ†® ÌîÑÎ°úÏ†ùÌä∏ Î∞è ÏÑ±Í≥º</p>
                <div class="card-container">
                    {#each detailData.relatedActivities as activity}
                        <a href={activity.link} class="card">
                            <img src={activity.img} alt={activity.title} class="thumbnail">
                            <div class="title-card">{activity.title}</div>
                            <div class="desc-card">{activity.desc}</div>
                        </a>
                    {/each}
                </div>
            </div>
            {/if}
        </div>

        <div class="right" style="background-image: url('{detailData.poster_path}')">
            <img
                src={detailData.poster_path}
                alt="Poster Load Test"
                class="poster-load-test"
                on:error={handleImageLoadError}
                on:load={() => {imageLoadError = false}}
            />

            {#if imageLoadError}
                <div class="image-error-overlay">
                    <p>Ïù¥ÎØ∏ÏßÄ Î°úÎìú Ïã§Ìå®</p>
                    <p class="error-detail">Google Drive ÌååÏùº Í≥µÏú† Í∂åÌïúÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî. (Ï†ÑÏ≤¥ Í≥µÍ∞ú, 'Î∑∞Ïñ¥' ÏÑ§Ï†ï ÌïÑÏöî)</p>
                </div>
            {/if}
        </div>
    {/if}
</div>

<style>
.container {
    display: flex;
    justify-content: flex-start;
    gap: 90px;
    padding: 130px 70px 80px 70px;
    align-items: flex-start;
    min-height: 100vh;
    background: linear-gradient(145deg, #050505, #0c0c0c 40%, #111 100%);
    color: white;
    font-family: "Noto Sans KR", sans-serif;
    animation: fadeIn 1.5s ease-out;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(25px); }
    to { opacity: 1; transform: translateY(0); }
}

.left {
    max-width: 500px;
    flex-shrink: 0;
    animation: slideLeft 1.2s ease-out;
}

@keyframes slideLeft {
    from { opacity: 0; transform: translateX(-40px); }
    to { opacity: 1; transform: translateX(0); }
}

.right {
    position: relative;
    flex-grow: 1;
    min-height: calc(100vh - 210px);
    width: 100%;
    background-size: cover;
    background-position: center center;
    background-repeat: no-repeat;
    border-radius: 16px;
    box-shadow: 0 0 35px rgba(255,255,255,0.18);
    animation: posterPop 1.4s ease-out;
    display: block;
    padding: 0;
    overflow: hidden;
}

.right::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4);
    border-radius: 16px;
    z-index: 1;
}

.poster-load-test {
    position: absolute;
    width: 1px;
    height: 1px;
    opacity: 0;
    pointer-events: none;
}

.image-error-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(18, 18, 18, 0.95);
    border-radius: 16px;
    z-index: 2;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 20px;
    font-size: 20px;
    color: #ff5555;
    font-weight: 700;
}

.error-detail {
    font-size: 14px;
    margin-top: 10px;
    color: #aaa;
    font-weight: 400;
}


.title {
    font-size: 40px; 
    font-weight: 900;
    margin-bottom: 25px;
    background: linear-gradient(90deg, #fff, #c9c9c9);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: 0 0 25px rgba(255,255,255,0.25);
}

.date-badge {
    display: inline-block;
    padding: 12px 22px;
    border-radius: 12px;
    background: rgba(255,255,255,0.08);
    backdrop-filter: blur(6px);
    border: 1px solid rgba(255,255,255,0.15);
    font-size: 20px;
    margin-bottom: 45px;
}

.btn-play {
    display: flex;
    align-items: center;
    justify-content: flex-start;
    width: 330px;
    height: 90px;
    background: linear-gradient(135deg, #ffffff, #f1f1f1);
    color: black;
    border-radius: 16px;
    font-size: 25px;
    font-weight: 700;
    cursor: pointer;
    margin-bottom: 55px;
    border: none;
    box-shadow: 0 12px 30px rgba(255,255,255,0.15);
    transition: 0.28s ease;
    position: relative;
    overflow: hidden;
    padding-left: 40px;
}
.btn-play svg {
    margin-right: 10px;
}

.btn-play::after {
    content: "";
    position: absolute;
    top: 0;
    left: -120%;
    width: 70%;
    height: 100%;
    background: linear-gradient(
        120deg,
        transparent,
        rgba(255,255,255,0.65),
        transparent
    );
    transform: skewX(-25deg);
    transition: 0.55s;
}

.btn-play:hover {
    transform: translateY(-3px) scale(1.06);
    box-shadow: 0 18px 40px rgba(255,255,255,0.25);
}

.btn-play:hover::after {
    left: 130%;
}


.icon-row {
    display: flex;
    gap: 55px;
    font-size: 27px;
    margin-bottom: 50px;
    margin-top: 0;
}

.icon-row div,
.icon-heart {
    display: flex;
    align-items: center;
    flex-direction: column;
    opacity: 0.85;
    cursor: pointer;
    transition: 0.25s ease;
    color: white;
}

.icon-heart:hover .heart-svg {
    fill: #ff4b4b;
    stroke: #ff4b4b;
}

.icon-row div:hover {
    transform: translateY(-7px);
    opacity: 1;
}

.icon-text {
    font-size: 14px;
    margin-top: 5px;
}

/* üÜï Í∞úÏöî ÌÖçÏä§Ìä∏ ÌÅ¨Í∏∞ 26pxÏóêÏÑú 20pxÎ°ú Ï°∞Ï†ï */
.desc {
    font-size: 20px; 
    color: #d0d0d0;
    line-height: 1.7;
    margin-bottom: 0;
    padding-bottom: 25px;
    text-shadow: 0 0 4px rgba(255,255,255,0.04);
}

.role-box-wrap {
    width: 100%;
    padding-top: 10px;
    max-width: 500px;
    margin-top: 25px;
}

.role-box-title {
    font-size: 22px;
    font-weight: 700;
    margin-bottom: 15px;
    color: #fff;
    border-bottom: 2px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 5px;
}

.role-box {
    padding: 20px;
    border: 1px solid rgba(255, 255, 255, 0.5);
    border-radius: 12px;
    background: rgba(255, 255, 255, 0.15);
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(8px);
}

.role-box p {
    font-size: 16px;
    margin: 8px 0;
    padding-left: 10px;
    border-left: 4px solid rgba(255, 255, 255, 0.9);
    line-height: 1.4;
    display: flex;
    flex-direction: column;
}

.timeline-period {
    font-weight: 700;
    color: #f0f0f0;
}
.timeline-event {
    font-size: 14px;
    color: #a0a0a0;
}


.poster {
    display: none;
}

@keyframes posterPop {
    from { opacity: 0; transform: scale(0.93); }
    to { opacity: 1; transform: scale(1); }
}

.loading-area, .error-area {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 80vh;
    width: 100%;
    text-align: center;
}

.spinner {
    border: 4px solid rgba(255,255,255,0.1);
    border-top: 4px solid white;
    border-radius: 50%;
    width: 45px;
    height: 45px;
    animation: spin 1s linear infinite;
    margin-bottom: 15px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.error-area h1 {
    font-size: 28px;
    color: #ff5555;
}

/* ---------------------------------------------------- */
/* Ïπ¥Îìú ÎîîÏûêÏù∏ Ïä§ÌÉÄÏùº */
/* ---------------------------------------------------- */

.card-section {
    padding-top: 50px;
    max-width: none;
}

.card-container {
    display: flex;
    gap: 32px;
    justify-content: flex-start; /* Í∞ÄÎ°ú Ï†ïÎ†¨ */
    flex-wrap: wrap; /* Í≥µÍ∞ÑÏù¥ Î∂ÄÏ°±ÌïòÎ©¥ Ï§ÑÎ∞îÍøà ÌóàÏö© */
    padding: 20px 0;
    margin-top: 20px;
    background: transparent;
    border: none;
    box-shadow: none;
    backdrop-filter: none;
}

.card {
    width: 360px;
    background: #1e1e1e;
    border-radius: 14px;
    overflow: hidden;
    box-shadow: 0px 6px 16px rgba(0,0,0,0.5);
    padding-bottom: 20px;
    transition: 0.2s;
    text-decoration: none;
    color: white;
    flex-shrink: 0;
    cursor: pointer;
}

.card:hover {
    transform: translateY(-6px);
    box-shadow: 0px 12px 24px rgba(0,0,0,0.7);
}

.thumbnail {
    width: 100%;
    height: 240px;
    object-fit: cover;
}

.title-card {
    font-size: 20px;
    font-weight: 700;
    padding: 18px 20px 10px 20px;
    line-height: 1.35;
    color: #f0f0f0;
}

.desc-card {
    font-size: 15px;
    line-height: 1.5;
    padding: 0 20px;
    color: #a0a0a0;
}


@media (max-width: 1024px) {
    .container {
        flex-direction: column;
        padding: 40px;
        gap: 40px;
    }
    .left {
        max-width: 100%;
        width: 100%;
    }
    .card-container {
        justify-content: center;
    }
    .right {
        width: 100%;
        min-height: 400px;
    }
    .title {
        font-size: 42px;
    }
    .btn-play {
        width: 100%;
        max-width: 330px;
        height: 65px;
        font-size: 20px;
    }
}
</style>